{% extends 'base.html' %}

{% block content %}

<div class="row">
    <div class="col-md-3">
        <table id="cote_table" class="table table-striped table-condensed" width="100%" cellspacing="0">
            <caption>Valeur de la côte pour 15 votes</caption>
            <thead>
                <tr>
                    <th>Nb vote pour 1 équipe</th>
                    <th>Cote</th>
                    <th>Point victoire</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1</td>
                    <td>7</td>
                    <td>14</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>6.53</td>
                    <td>13.07</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>6.07</td>
                    <td>12.13</td>
                </tr>
                <tr>
                    <td>4</td>
                    <td>5.6</td>
                    <td>11.2</td>
                </tr>
                <tr>
                    <td>5</td>
                    <td>5.13</td>
                    <td>10.27</td>
                </tr>
                <tr>
                    <td>6</td>
                    <td>4.67</td>
                    <td>9.33</td>
                </tr>
                <tr>
                    <td>7</td>
                    <td>4.2</td>
                    <td>8.4</td>
                </tr>
                <tr>
                    <td>8</td>
                    <td>3.73</td>
                    <td>7.47</td>
                </tr>
                <tr>
                    <td>9</td>
                    <td>3.37</td>
                    <td>6.53</td>
                </tr>
                <tr>
                    <td>10</td>
                    <td>2.8</td>
                    <td>5.6</td>
                </tr>
                <tr>
                    <td>11</td>
                    <td>2.33</td>
                    <td>4.67</td>
                </tr>
                <tr>
                    <td>12</td>
                    <td>1.87</td>
                    <td>3.73</td>
                </tr>
                <tr>
                    <td>13</td>
                    <td>1.4</td>
                    <td>2.8</td>
                </tr>
                <tr>
                    <td>14</td>
                    <td>0.93</td>
                    <td>1.87</td>
                </tr>
                <tr>
                    <td>15</td>
                    <td>0.47</td>
                    <td>0.94</td>
                </tr>
            </tbody>

        </table>    
    </div>
    <div id="chart" class="col-md-9">
        <script src="https://code.highcharts.com/highcharts.src.js"></script>
        <script src="http://code.highcharts.com/modules/data.src.js"></script>
        <script src="http://code.highcharts.com/modules/exporting.js"></script>
        <script>
            Highcharts.chart('chart', {
                data: {
                    table: document.getElementById('cote_table'),
                    startRow: 0,
                    /**
                     * Modify generated settings
                     * https://stackoverflow.com/questions/36618367/highcharts-column-chart-disable-interpolation-when-loading-from-data-table
                     */
                    complete: function (settings) {
                        // We are going to create categories from each item in the series
                        settings.xAxis = {
                            categories: []
                        };
                        settings.series.map(function (series) {
                            return series.data.map(function (series_item) {
                                // Cast the item name to a string to prevent interpolation
                                series_item[0] = String(series_item[0]);
                                // Add the name to our categories:
                                settings.xAxis.categories.push(series_item[0]);
                                return series_item;
                            });
                        });
                    }
                },
                chart: {
                    type: 'column'
                },
                title: {
                    text: 'Points de victoire récoltés'
                },
                xAxis: [{

                    visible: false
                }, {
                    type: 'logarithmic',
                    tickInterval: 0.2
                }],
                yAxis: {
                    title: {
                        text: 'Points'
                    }
                },
                exporting: {
                    enabled: false
                },
                tooltip: {
                    formatter: function () {
                        return '<b>Nombre de votes</b> : '+ this.point.name;
                    }
                }
            });
        </script>
    </div>
</div>
{% endblock %}
